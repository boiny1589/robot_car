<launch>
    <!-- 
        This is the main launch file to run the Gazebo simulation 
        and view the sensor data in RViz simultaneously.
    -->

    <!-- Start Gazebo with the specified world and spawn the robot -->
    <include file="$(find urdf_gazebo)/launch/union.launch" />

    <!-- 
      The joint_state_publisher publishes the state of all non-fixed joints (e.g., wheels) 
      to the /joint_states topic. This is needed by robot_state_publisher.
    -->
    <node name="joint_state_publisher" pkg="joint_state_publisher" type="joint_state_publisher" />

    <!-- 
      The robot_state_publisher reads the URDF and /joint_states to publish
      the complete TF tree of the robot.
    -->
    <node name="robot_state_publisher" pkg="robot_state_publisher" type="robot_state_publisher" />

    <!-- Start RViz with the custom simulation configuration -->
    <node name="rviz" pkg="rviz" type="rviz" args="-d $(find urdf_gazebo)/config/simulation.rviz" required="true" />

</launch> 